ModSync Official Documentation.

KOTORModSync is a multi-mod installer for KOTOR 1 and 2. Its purpose is to allow a user to select the mods they want for install, and choose the options/customizations for each mod, handling the dependencies/custom instruction steps automatically.

The Problem:
Many users that are new to KOTOR don't understand KOTOR's unique modding limitations. They may be used to Vortex or the Steam workshop, and not understand why they can't just simply install mods A->B->C->D and uninstall mod B. KOTOR's modding architecture and tools strongly rely on install order, which prevents users from safely uninstalling a mod later in their install process - this can be catastrophic if a user only finds out after the fact that they no longer want a certain mod, because they would be forced to restart the entire modding process just to take it out. When installing dozens upon dozens of mods, these problems can quickly become overwhelming.

KOTORModSync's Solution:
KOTORModSync is a tool that allows the user to simply SELECT the mods they want and press a single 'install all' button. That's all an end user should have to do. There's plenty of installers around (installshield, InnoSetup, Wix etc) that have simple installers that'll show a list of components to install. The user can simply select the ones they want and spam the next button until the thing finishes. So, why not KOTOR?

That's the goal here. In order to do this, we need someone to define the instructions. I've seen plenty of batch installers outdated by various mod updates or changes. They sound like a pain to upkeep. So this isn't the way to go either. We need an easy way to *create* instructions. Given this, KOTORModSync is designed to save and load an instruction file written in TOMLIN. TOMLIN was one of the easiest syntaxes to read/interpret by both machine and by human, allowing easy modifications and updates.

KOTORModSync will allow you (or any mod collection author who chooses to utilize it) to create an instruction file and organize it inside of the tool itself. This means you can define what install steps to perform based on what other mods are being installed. Because KOTORModSync is designed to manage the full installation process of all mods (so it can "see" everything you intend to use), the tool is a powerful assistant in determining what mods may or may not be compatible with one another. This way, if a mod changes or a mod collection creator wants to add another mod to their set, they already have a full list of changes that are happening in one handy location and can easily sort through them to determine whether a new mod will be functional with the existing setup. Not sure if your mod is compatible with another? Slap the 'untested' category on it and the user will be unable to select both unless they've also selected a Compatibility Level of 'Untested'.

The Install Process:
The installer will install the selected (checked) mods in the left list from top to bottom when a user clicks 'Install All' following the instructions in the config file. Instructions will be ran in order. The installer does no verification of whether a user is using a vanilla installation of KOTOR, please keep this in mind when handling bug reports.

The KOTORModSync Config File:
The TOMLIN instruction file contains is designed to organize the following mod information in a multi-mod environment. An individual mod has the following groupings:
Information: the name, description, download link(s), authors, any identifying information. All mods are indexed by a GUID to ensure uniqueness in an instruction file.
Instructions: A list of all instructions that need to be executed in order to install a mod. This includes specific instructions dependent on other mods (see the dependency section below)
Options: User-customizeable features that this mod provides. For example, you might see that the 'Visually Repair HK-47' mod for K2 has two options: one that modifies appearance of both hk-47 and hk-50/51, and the other option modifies ONLY hk-47. These options are all redefined here.

A GUID (Globally Unique Identifier) is a 128-bit number, which means it consists of 2^128 unique values. This is a very large number: 340,282,366,920,938,463,463,374,607,431,768,211,456.
So there are a total of 340 undecillion (short scale) or 340 sextillion (long scale) unique GUIDs.

Mod Dependency Explanation:
A mod can be defined in the config as being compatible or incompatible with other mods/options. Each specific mod has the following dependency lists to support this:
Dependencies: List of Mods/Options that are REQUIRED to be SELECTED for an install in order for THIS mod to install.
Restrictions: List of Mods/Options that CANNOT BE SELECTED in order for THIS Specific mod to be installed. Basically the opposite of the above list. If anything is selected here, the mod won't install and will be skipped.
InstallAfter: List of Mods/Options that must be installed BEFORE installing THIS mod. This mod must be installed after all of the mods/options in the list.
InstallBefore: List of Mods/Options that must be installed AFTER installing THIS mod. This mod must be installed before all of the mods/options in the list. Adding a mod/option to the list will immediately reorder the left selection list to follow this requirement of install order.

Instructions Explanations:
KOTORModSync is capable of handling the following Actions:
Move -> Move a file to a folder
Copy -> Copy a file to a folder
Execute -> Execute an executable file
Patcher -> Execute a Patcher install from the given tslpatchdata directory path.
Rename -> Renames a file
Choose -> Defines an instruction that'll choose between a list of GUID options.
DelDuplicate -> An instruction that will deletes all files containing the specified extension, when the filenames duplicate.
Extract -> Extracts an archive. Currently supports [.7z, .rar, .zip, and 7zip .EXE] archives ONLY. 7z SFX executables (.exe) are extracted cross-platform by parsing the embedded 7z payload, with a CLI fallback (7z) on non-Windows systems if available.
Delete -> Deletes a file.

All of these instructions have the following fields:
Source -> List of files to handle. If the instruction is 'Choose', this will instead be a list of GUIDs.
Destination -> Applicable to the 'Move', 'Copy', 'Rename', 'Patcher', and 'Delete' Actions ONLY. This will usually be a location in the install (kotor) directory, or in the case of rename it's the new filename to rename to.
Overwrite -> Applicable to the 'Move', 'Copy', and 'Rename' Actions ONLY. When 'True', means that the file will be overwritten, when false, means that the file will be skipped if it exists.
Dependencies -> List of Mods/Options that are REQUIRED to be SELECTED for this specific single instruction to run. If ANY of the mods/options in this list are not selected, this instruction will not be run.
Restrictions -> List of Mods/Options that CANNOT BE SELECTED in order for this specific single instruction to run. Basically the opposite of the above.
Arguments -> Applicable to the 'DelDuplicate', 'Execute', and 'Patcher' actions ONLY. For Patcher, this is the namespace option index listed in 'namespaces.ini' indexed based starting at 0 for the first option. For 'DelDuplicate', this is the extension of the files we want deleted if they duplicate. For 'Execute', this defines the extra command line arguments to send to the program before we launch it.

Options Explanations:
An Options is defined just like an individual mod, only nested in a real mod. In case that's not clear, it has the following properties:
Name, Description, Directions, Dependencies, Restrictions, InstallAfter, InstallBefore

If an option is incompatible with another option you simply need to add the other option into the Restrictions list for this option and do the same with the other option. E.g. if two options Option A and Option B are incompatible with each other, the Restrictions list of Option A will contain Option B, and the restrictions list of Option B will contain Option A. This makes it impossible for the user to install both with ModSync.

This can all be pretty overwhelming but what's important to understand is that ModSync is capable of following all the mods' convoluted installation steps in regards to other mods while still giving the user that one-click install-all approach that they deserve.

Patcher Options:
ModSync uses HoloPatcher internally, which allows us to install all selected mods in bulk, without bugging a user to click through multiple Patcher windows and praying they choose the correct option.
PyKotor and its frontend HoloPatcher installs mods significantly faster than TSLPatcher, and is supported on linux/mac!
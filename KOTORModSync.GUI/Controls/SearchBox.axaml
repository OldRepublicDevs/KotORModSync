<UserControl
    x:Class="KOTORModSync.Controls.SearchBox"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Border
        Padding="8,4"
        Background="{DynamicResource ThemeBackgroundBrush}"
        BorderBrush="{DynamicResource ThemeBorderMidBrush}"
        BorderThickness="1"
        CornerRadius="3">
        <Border.Styles>
            <Style Selector="Border:focus-within">
                <Setter Property="BorderBrush" Value="{DynamicResource ThemeAccentBrush}" />
                <Setter Property="BorderThickness" Value="2" />
                <Setter Property="Padding" Value="7,3" />
            </Style>
        </Border.Styles>

        <Grid ColumnDefinitions="Auto,*,Auto">
            <!--  Magnifying Glass Icon  -->
            <Viewbox
                Grid.Column="0"
                Width="16"
                Height="16"
                Margin="0,0,8,0">
                <Canvas Width="24" Height="24">
                    <Path Data="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" Fill="{DynamicResource ThemeForegroundLowBrush}" />
                </Canvas>
            </Viewbox>

            <!--  TextBox  -->
            <TextBox
                Name="SearchTextBox"
                Grid.Column="1"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Foreground="{DynamicResource ThemeForegroundBrush}"
                Text="{Binding $parent[UserControl].SearchText, Mode=TwoWay}"
                Watermark="Search by name or author...">
                <TextBox.Styles>
                    <Style Selector="TextBox /template/ Border#PART_BorderElement">
                        <Setter Property="Background" Value="Transparent" />
                    </Style>
                </TextBox.Styles>
            </TextBox>

            <!--  Clear Button (Red X)  -->
            <Button
                Name="ClearButton"
                Grid.Column="2"
                Width="20"
                Height="20"
                Padding="0"
                Background="Transparent"
                BorderThickness="0"
                Cursor="Hand"
                IsVisible="False"
                ToolTip.Tip="Clear search">
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Opacity" Value="0.7" />
                    </Style>
                    <Style Selector="Button:pointerover">
                        <Setter Property="Opacity" Value="1.0" />
                    </Style>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="Transparent" />
                    </Style>
                </Button.Styles>
                <Viewbox Width="14" Height="14">
                    <Canvas Width="24" Height="24">
                        <Path Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" Fill="#DC3545" />
                    </Canvas>
                </Viewbox>
            </Button>
        </Grid>
    </Border>
</UserControl>

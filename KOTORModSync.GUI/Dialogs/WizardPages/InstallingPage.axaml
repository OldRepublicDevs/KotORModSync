<!--  Copyright 2021-2025 KOTORModSync  -->
<!--  Licensed under the Business Source License 1.1 (BSL 1.1).  -->
<!--  See LICENSE.txt file in the project root for full license information.  -->
<UserControl
    x:Class="KOTORModSync.Dialogs.WizardPages.InstallingPage"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid RowDefinitions="Auto,*,Auto">
        <!--  Main Progress Section  -->
        <Border Grid.Row="0" Padding="24,20" CornerRadius="12" Margin="0,0,0,16">
            <StackPanel Spacing="16">
                <!--  Overall Progress Header  -->
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock
                        x:Name="PercentText"
                        Grid.Column="0"
                        FontSize="28"
                        FontWeight="Bold"
                        Text="0%" />
                    <TextBlock
                        x:Name="CountText"
                        Grid.Column="1"
                        FontSize="16"
                        Opacity="0.8"
                        VerticalAlignment="Center"
                        Text="0/0 mods installed" />
                </Grid>

                <!--  Main Progress Bar  -->
                <ProgressBar
                    x:Name="MainProgressBar"
                    Height="12"
                    Maximum="1"
                    Minimum="0"
                    CornerRadius="6" />

                <!--  Current Mod Info  -->
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Grid.Column="0" Spacing="6">
                        <TextBlock
                            x:Name="CurrentModText"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="Preparing installation..." />
                        <TextBlock
                            x:Name="DirectionsText"
                            MaxHeight="60"
                            FontSize="13"
                            Opacity="0.7"
                            TextWrapping="Wrap" />
                    </StackPanel>
                    <TextBlock
                        x:Name="CurrentOperationText"
                        Grid.Column="1"
                        FontSize="13"
                        Opacity="0.6"
                        VerticalAlignment="Top"
                        Text="Initializing..." />
                </Grid>

                <!--  Current Mod Progress  -->
                <ProgressBar
                    x:Name="CurrentModProgress"
                    Height="6"
                    IsIndeterminate="True"
                    CornerRadius="3" />

                <!--  Checkpoint Status  -->
                <Grid ColumnDefinitions="Auto,*" Margin="0,8,0,0">
                    <TextBlock
                        Grid.Column="0"
                        FontSize="12"
                        Opacity="0.7"
                        Text="ðŸ’¾ " />
                    <TextBlock
                        x:Name="CheckpointStatusText"
                        Grid.Column="1"
                        FontSize="12"
                        Opacity="0.7"
                        Text="Checkpoints enabled" />
                </Grid>
            </StackPanel>
        </Border>

        <!--  Statistics & Info Grid  -->
        <Grid Grid.Row="1" ColumnDefinitions="*,16,*" RowDefinitions="Auto,16,Auto">
            <!--  Time Statistics  -->
            <Border
                Grid.Row="0"
                Grid.Column="0"
                Padding="20,16"
                CornerRadius="10">
                <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto,12,Auto,12,Auto">
                    <StackPanel Grid.Row="0" Grid.Column="0" Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Opacity="0.6"
                            Text="ELAPSED"
                            TextAlignment="Center" />
                        <TextBlock
                            x:Name="ElapsedTimeText"
                            FontSize="18"
                            FontWeight="Bold"
                            Text="--:--:--"
                            TextAlignment="Center" />
                    </StackPanel>

                    <StackPanel Grid.Row="0" Grid.Column="1" Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Opacity="0.6"
                            Text="REMAINING"
                            TextAlignment="Center" />
                        <TextBlock
                            x:Name="RemainingTimeText"
                            FontSize="18"
                            FontWeight="Bold"
                            Text="--:--:--"
                            TextAlignment="Center" />
                    </StackPanel>

                    <StackPanel Grid.Row="0" Grid.Column="2" Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Opacity="0.6"
                            Text="RATE"
                            TextAlignment="Center" />
                        <TextBlock
                            x:Name="RateText"
                            FontSize="18"
                            FontWeight="Bold"
                            Text="0.0/min"
                            TextAlignment="Center" />
                    </StackPanel>

                    <StackPanel
                        Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Opacity="0.6"
                            Text="ISSUES"
                            TextAlignment="Center" />
                        <Grid ColumnDefinitions="*,*">
                            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="6">
                                <TextBlock FontSize="14" Text="âš ï¸" />
                                <TextBlock
                                    x:Name="WarningsText"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Text="0" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="6">
                                <TextBlock FontSize="14" Text="âŒ" />
                                <TextBlock
                                    x:Name="ErrorsText"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Text="0" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!--  Checkpoint Count  -->
                    <StackPanel
                        Grid.Row="4"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Opacity="0.6"
                            Text="CHECKPOINTS CREATED"
                            TextAlignment="Center" />
                        <TextBlock
                            x:Name="CheckpointsCreatedText"
                            FontSize="16"
                            FontWeight="Bold"
                            Text="0"
                            TextAlignment="Center" />
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Mod Showcase Placeholder  -->
            <Border
                Grid.Row="0"
                Grid.Column="2"
                Padding="20,16"
                CornerRadius="10">
                <StackPanel Spacing="12" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock
                        FontSize="48"
                        Text="ðŸŽ®"
                        TextAlignment="Center" />
                    <TextBlock
                        FontSize="16"
                        FontWeight="SemiBold"
                        Text="Installing Your Mods"
                        TextAlignment="Center" />
                    <TextBlock
                        FontSize="13"
                        Opacity="0.7"
                        Text="Sit back and relax while we handle everything"
                        TextAlignment="Center"
                        TextWrapping="Wrap" />
                </StackPanel>
            </Border>

            <!--  Installation Info  -->
            <Border
                Grid.Row="2"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Padding="20,16"
                CornerRadius="10">
                <StackPanel Spacing="8">
                    <TextBlock
                        FontSize="14"
                        FontWeight="SemiBold"
                        Text="âš™ï¸ What's Happening?" />
                    <Grid ColumnDefinitions="*,*">
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Extracting archives" />
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Running TSLPatcher/HoloPatcher" />
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Moving and copying files" />
                        </StackPanel>
                        <StackPanel Grid.Column="1" Spacing="4">
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Managing dependencies" />
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Creating checkpoints" />
                            <TextBlock FontSize="12" Opacity="0.8" Text="âœ“ Validating installations" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>

        <!--  Footer Note  -->
        <Border Grid.Row="2" Padding="16,12" CornerRadius="8" Margin="0,16,0,0">
            <TextBlock
                FontSize="12"
                Opacity="0.7"
                Text="âš ï¸ Please do not close the application during installation"
                TextAlignment="Center" />
        </Border>
    </Grid>
</UserControl>

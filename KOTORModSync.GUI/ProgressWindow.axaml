<!-- Copyright 2021-2025 KOTORModSync -->
<!-- Licensed under the Business Source License 1.1 (BSL 1.1). -->
<!-- See LICENSE.txt file in the project root for full license information. -->
<Window
    x:Class="KOTORModSync.ProgressWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Installing Mods"
    Width="800"
    Height="520"
    Background="Transparent"
    ExtendClientAreaChromeHints="NoChrome"
    ExtendClientAreaTitleBarHeightHint="-1"
    ExtendClientAreaToDecorationsHint="True"
    SizeToContent="Manual"
    SystemDecorations="BorderOnly"
    TransparencyLevelHint="AcrylicBlur">
    <Panel>
        <!--  Custom Window Controls  -->
        <StackPanel
            Margin="0,8,8,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Orientation="Horizontal"
            Spacing="0">
            <Button
                Width="40"
                Height="40"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Click="MinimizeButton_Click"
                Content="-"
                FontSize="15" />
            <Button
                Width="40"
                Height="40"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Click="ToggleMaximizeButton_Click"
                Content="â–¢"
                FontSize="15" />
            <Button
                Width="40"
                Height="40"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Click="CloseButton_Click"
                Content="X"
                FontSize="15" />
        </StackPanel>

        <Border
            Margin="16"
            Padding="16"
            CornerRadius="8">
            <Grid ColumnDefinitions="*" RowDefinitions="Auto,Auto,Auto,*,Auto">
                <!--  Header  -->
                <DockPanel
                    Grid.Row="0"
                    Margin="0,0,0,12"
                    LastChildFill="True">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="18"
                        FontWeight="Bold"
                        Text="Installing mods" />
                    <StackPanel
                        HorizontalAlignment="Right"
                        Orientation="Horizontal"
                        Spacing="8">
                        <TextBlock
                            x:Name="PercentCompleted"
                            VerticalAlignment="Center"
                            Text="0%" />
                        <TextBlock Margin="2,0" Text="|" />
                        <TextBlock
                            x:Name="InstalledRemaining"
                            VerticalAlignment="Center"
                            Text="0/0 Total Installed" />
                    </StackPanel>
                </DockPanel>

                <!--  Progress message / directions  -->
                <Border
                    Grid.Row="1"
                    Padding="12"
                    CornerRadius="6">
                    <ScrollViewer MaxHeight="120">
                        <TextBlock
                            x:Name="ProgressTextBlock"
                            Margin="0"
                            FontSize="14"
                            TextAlignment="Left"
                            TextWrapping="Wrap" />
                    </ScrollViewer>
                </Border>

                <!--  Progress bars  -->
                <StackPanel
                    Grid.Row="2"
                    Margin="0,12,0,12"
                    Spacing="8">
                    <ProgressBar
                        x:Name="ProgressBar"
                        Height="18"
                        Maximum="1"
                        Minimum="0"
                        ShowProgressText="True"
                        Value="0" />
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="Current step:" />
                        <TextBlock x:Name="CurrentOperationText" Text="Preparing..." />
                    </StackPanel>
                    <ProgressBar
                        x:Name="CurrentStepProgress"
                        Height="6"
                        IsIndeterminate="True" />
                </StackPanel>

                <!--  Metrics grid  -->
                <Grid
                    Grid.Row="3"
                    Margin="0,0,0,12"
                    ColumnDefinitions="*,*,*,*"
                    RowDefinitions="Auto,Auto">
                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="0"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Elapsed" />
                        <TextBlock x:Name="ElapsedText" Text="00:00:00" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="1"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Remaining (est.)" />
                        <TextBlock x:Name="RemainingText" Text="--:--:--" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="2"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Rate" />
                        <TextBlock x:Name="RateText" Text="0 mods/min" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="3"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Components" />
                        <TextBlock x:Name="ComponentsSummaryText" Text="0 of 0" />
                    </StackPanel>

                    <StackPanel
                        Grid.Row="1"
                        Grid.Column="0"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Warnings" />
                        <TextBlock x:Name="WarningsText" Text="0" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="1"
                        Grid.Column="1"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Errors" />
                        <TextBlock x:Name="ErrorsText" Text="0" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="1"
                        Grid.Column="2"
                        Grid.ColumnSpan="2"
                        Spacing="2">
                        <TextBlock FontWeight="Bold" Text="Stage" />
                        <TextBlock x:Name="StageText" Text="Installing" />
                    </StackPanel>
                </Grid>

                <!--  Footer / actions  -->
                <DockPanel Grid.Row="4">
                    <TextBlock VerticalAlignment="Center" Text="Do not close this window while installation is in progress." />
                    <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                        <Button
                            MinWidth="100"
                            Click="OnCancelClick"
                            Content="Cancel" />
                    </StackPanel>
                </DockPanel>
            </Grid>
        </Border>
    </Panel>
</Window>

<!--  Copyright 2021-2025 KOTORModSync  -->
<!--  Licensed under the Business Source License 1.1 (BSL 1.1).  -->
<!--  See LICENSE.txt file in the project root for full license information.  -->
<Window
    x:Class="KOTORModSync.Dialogs.TelemetryConsentDialog"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Help Improve KOTORModSync"
    Width="600"
    Height="550"
    CanResize="False"
    ShowInTaskbar="False"
    WindowStartupLocation="CenterOwner">

    <Window.Styles>
        <Style Selector="TextBlock.header">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Margin" Value="0,0,0,10" />
        </Style>

        <Style Selector="TextBlock.body">
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="Margin" Value="0,0,0,15" />
        </Style>

        <Style Selector="CheckBox">
            <Setter Property="Margin" Value="0,5" />
        </Style>
    </Window.Styles>

    <Border Padding="20">
        <Grid RowDefinitions="Auto,*,Auto">
            <!--  Header  -->
            <StackPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock
                    Classes="header"
                    FontSize="18"
                    Text="ðŸ“Š Help Improve KOTORModSync" />
                <TextBlock Classes="body" Text="Your feedback helps us make KOTORModSync better for everyone!" />
            </StackPanel>

            <!--  Content  -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Classes="header" Text="What Data Would Be Collected?" />

                    <TextBlock Classes="body">
                        We'd like to collect<Bold>anonymous usage and performance data</Bold>
                        to help improve the application.
                        This helps us understand which features are most useful and identify performance issues.</TextBlock>

                    <Border
                        Margin="0,0,0,15"
                        Padding="15"
                        BorderThickness="1"
                        CornerRadius="5">
                        <StackPanel>
                            <TextBlock
                                Margin="0,0,0,10"
                                FontWeight="Bold"
                                Text="âœ… What We Collect:" />
                            <TextBlock Margin="10,2" Text="â€¢ Which features you use (buttons clicked, tabs viewed)" />
                            <TextBlock Margin="10,2" Text="â€¢ Performance metrics (installation times, app responsiveness)" />
                            <TextBlock Margin="10,2" Text="â€¢ Error and crash reports (to fix bugs)" />
                            <TextBlock Margin="10,2" Text="â€¢ Operating system and app version" />
                            <TextBlock Margin="10,2" Text="â€¢ Anonymous session identifier" />
                        </StackPanel>
                    </Border>

                    <Border
                        Margin="0,0,0,15"
                        Padding="15"
                        BorderThickness="1"
                        CornerRadius="5">
                        <StackPanel>
                            <TextBlock
                                Margin="0,0,0,10"
                                FontWeight="Bold"
                                Text="âŒ What We DON'T Collect:" />
                            <TextBlock Margin="10,2" Text="â€¢ Your name, email, or personal information" />
                            <TextBlock Margin="10,2" Text="â€¢ Mod names, file contents, or game data" />
                            <TextBlock Margin="10,2" Text="â€¢ File paths or directory structures" />
                            <TextBlock Margin="10,2" Text="â€¢ Passwords or authentication tokens" />
                            <TextBlock Margin="10,2" Text="â€¢ IP addresses (unless you enable remote sending)" />
                        </StackPanel>
                    </Border>

                    <TextBlock Classes="header" Text="Privacy Controls" />

                    <CheckBox
                        x:Name="CollectUsageCheckBox"
                        Content="Allow usage data collection (feature usage)"
                        IsChecked="True" />

                    <CheckBox
                        x:Name="CollectPerformanceCheckBox"
                        Content="Allow performance metrics collection (speeds and timings)"
                        IsChecked="True" />

                    <CheckBox
                        x:Name="CollectCrashReportsCheckBox"
                        Content="Allow crash and error reports"
                        IsChecked="True" />

                    <CheckBox
                        x:Name="CollectMachineInfoCheckBox"
                        Content="Include computer name (reduces privacy)"
                        IsChecked="False" />

                    <Separator Margin="0,15" />

                    <TextBlock Classes="header" Text="Data Storage Options" />

                    <RadioButton
                        x:Name="LocalOnlyRadio"
                        Margin="0,5"
                        Content="Store data locally only (most private)"
                        GroupName="StorageOption"
                        IsChecked="True" />

                    <TextBlock
                        Margin="25,0,0,10"
                        FontSize="11"
                        Foreground="Gray"
                        Text="Data will be saved to your local machine only. You can review it anytime." />

                    <RadioButton
                        x:Name="SendRemoteRadio"
                        Margin="0,5"
                        Content="Send data to KOTORModSync servers (helps us more)"
                        GroupName="StorageOption" />

                    <TextBlock
                        Margin="25,0,0,10"
                        FontSize="11"
                        Foreground="Gray"
                        Text="Data will be anonymized and sent securely to help us improve the app." />

                    <Border
                        Margin="0,15,0,0"
                        Padding="15"
                        CornerRadius="5">
                        <StackPanel>
                            <TextBlock
                                Margin="0,0,0,5"
                                FontWeight="Bold"
                                Text="ðŸ”’ Your Privacy Matters" />
                            <TextBlock FontSize="11" TextWrapping="Wrap">
                                All telemetry is<Bold>completely optional</Bold>
                                and can be disabled at any time in Settings.
                                We follow industry best practices for data privacy and will never sell your data.
                                For more information, see our Privacy Policy at github.com/th3w1zard1/KOTORModSync</TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!--  Buttons  -->
            <Grid
                Grid.Row="2"
                Margin="0,20,0,0"
                ColumnDefinitions="*,Auto,Auto">
                <Button
                    x:Name="EnableButton"
                    Grid.Column="1"
                    Width="150"
                    Margin="0,0,10,0"
                    Click="EnableButton_Click"
                    Content="Enable Telemetry" />

                <Button
                    x:Name="DeclineButton"
                    Grid.Column="2"
                    Width="120"
                    Click="DeclineButton_Click"
                    Content="No Thanks" />
            </Grid>
        </Grid>
    </Border>
</Window>
